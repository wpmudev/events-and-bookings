/*! Events and Bookings - v1.9.8
 * http://premium.wpmudev.org/project/events-and-booking
 * Copyright (c) 2018; * Licensed GPLv2+ */

!function(a){function b(b){b&&b.preventDefault&&b.preventDefault(),a("#eab-rsvps-rsvp_with_email-wrapper").length&&a("#eab-rsvps-rsvp_with_email-wrapper").remove();var d=a(this),e=d.text();d.parents(".wpmudevevents-buttons").append('<div id="eab-rsvps-rsvp_with_email-wrapper" />');var f=a("#eab-rsvps-rsvp_with_email-wrapper"),g=d.parents(".wpmudevevents-buttons").find('input:hidden[name="event_id"]').val();f.append('<label for="eab-rsvps-rsvp_with_email">'+l10nRsvpWithEmail.email+'&nbsp;<input type="email" id="eab-rsvps-rsvp_with_email" />&nbsp;<input type="button" id="eab-rsvps-rsvp_with_email-trigger" value="'+e+'" /></label>'),a(document).trigger("eab-api-email_rsvp-form_rendered"),a("#eab-rsvps-rsvp_with_email-trigger").click(function(){c(d.removeClass("active").attr("class"),g)})}function c(b,c){var e,f=a("#eab-rsvps-rsvp_with_email"),g=f.val();if(!g)return!1;e={action:"eab-rsvps-rsvp_with_email",email:g,location:location.href},a(".eab-additional-registration-field").each(function(){e[a(this).data("key")]=a(this).val()}),a.post(_eab_data.ajax_url,e,function(a){var e=0;try{e=parseInt(a.status,10)}catch(a){e=0}if(e<1)return f.closest("label").replaceWith("<span>"+a.msg+"</span>"),!1;d(b,c)},"json")}function d(b,c){a.post(_eab_data.ajax_url,{action:"eab_get_form",post_id:c},function(c){a("body").append('<div id="eab-rsvps-rsvp_with_email-form">'+c+"</div>"),a("#eab-rsvps-rsvp_with_email-form").find("."+b).click()})}a(function(){a("a.wpmudevevents-yes-submit, a.wpmudevevents-maybe-submit, a.wpmudevevents-no-submit").click(b)})}(jQuery);